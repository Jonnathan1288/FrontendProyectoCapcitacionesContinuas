<!-- 
<button (click)="guardarDatosVacios()">vacio</button> -->
<!-- 
<p-table [value]="listNotas" [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
        <tr>
            <th style="width:20%">Identificación</th>
            <th style="width:20%">Cedula</th>
            <th style="width:20%">Nota Parcial</th>
            <th style="width:20%">Nota Examén Final</th>
            <th style="width:20%">Observación</th>
            <th style="width:20%"></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
        <tr>
            <td>{{product.partipantesMatriculados!.inscrito!.usuario!.persona!.identificacion}} </td>
            <td>{{product.partipantesMatriculados!.inscrito!.usuario!.persona.nombre1}}
                {{product.partipantesMatriculados!.inscrito!.usuario!.persona.nombre2}}
                {{product.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido1}}
                {{product.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido2}}</td>
            <td>{{product.parcial}}</td>
            <td>{{product.examenFinal}}</td>
            <td>{{product.observacion}}</td>
            <td><button pButton type="button" icon="pi pi-book" (click)="showModalNotas(product.idNota)"
                    class="p-button-rounded p-button-text"></button></td>
        </tr>
    </ng-template>
</p-table> -->


<!-- //NUEVA TABLA DE PRIMENG -->




<div class="container my-3">


    <div class="attendance-section">
        <h2 class="section-title"><strong>REGISTRO DE NOTAS FINALES DE LOS ESTUDIANTES</strong> </h2>

    </div>

    <div class="container mt-2 ">
        <div class="card text-center mb-2 shadow-4 rounded-5">
            <p-table [value]="listNotas" [paginator]="true" [rows]="rows" [showCurrentPageReport]="true"
                [(first)]="first" [tableStyle]="{'min-width': '50rem'}"
                currentPageReportTemplate="Mostrando {first} to {last} of {totalRecords} estudiantes"
                [rowsPerPageOptions]="[5,10,15]">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width:40%"><strong>NOMBRES</strong></th>
                        <th style="width:25%"><strong>IDENTIFICASIÓN</strong></th>


                        <th style="width:25%"><strong>NOTA PARCIAL</strong></th>
                        <th style="width:10%"><strong>NOTA EXAMEN FINAL</strong></th>
                        <th style="width:10%"><strong>OBSERVACIÓN</strong></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-data>
                    <tr>
                        <!-- <td>
                            <div class="d-flex align-items-center">
                                <div>
                                    <p class="fw-bold mb-1">{{
                                        data.partipantesMatriculados!.inscrito!.usuario!.persona!.nombre1 }} {{
                                        data.partipantesMatriculados!.inscrito!.usuario!.persona!.nombre2 }} {{
                                        data.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido1 }} {{
                                        data.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido2 }}</p>
                                    <p class="text-muted mb-0">{{
                                        data.partipantesMatriculados!.inscrito!.usuario!.persona!.correo }}</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-muted mb-0">{{
                                data.partipantesMatriculados!.inscrito!.usuario!.persona!.identificacion }}</p>
                        </td>
                        <td>
                            <p class="text-muted mb-0">{{
                                data.observacionAsistencia }}</p>
                        </td>
                        <td>
                            <div class="d-flex align-items-center">
                                <p-button *ngIf='data.estadoAsistencia == true' icon="pi pi-check-square"
                                    styleClass="p-button-success me-2"
                                    (click)="estudianteNOAsisteAClase(data.idAsistencia, data)"></p-button>
                                <p-button *ngIf='data.estadoAsistencia == false' icon="pi pi-times"
                                    styleClass="p-button-danger me-2"
                                    (click)="estudianteAsisteClase(data.idAsistencia, data)"></p-button>
                            </div>
                        </td>
                        <td>
                            <p-button icon="pi pi-eye" (click)="showDialog(data)"></p-button>
                        </td> -->

                        <td>{{data.partipantesMatriculados!.inscrito!.usuario!.persona.nombre1}}
                            {{data.partipantesMatriculados!.inscrito!.usuario!.persona.nombre2}}
                            {{data.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido1}}
                            {{data.partipantesMatriculados!.inscrito!.usuario!.persona!.apellido2}}</td>
                        <td>{{data.partipantesMatriculados!.inscrito!.usuario!.persona!.identificacion}} </td>

                        <td>{{data.parcial}}</td>
                        <td>{{data.examenFinal}}</td>
                        <td>{{data.observacion}}</td>
                        <td><button pButton type="button" icon="pi pi-book" (click)="showModalNotas(data.idNota)"
                                class="p-button-rounded p-button-text"></button></td>

                    </tr>
                </ng-template>
            </p-table>


        </div>
        <p-button label="Validar Notas" icon="pi pi-calendar-minus" styleClass="p-button-success  mb-2 m-2"
            style="text-align: center;" (click)="vaidarNotasEstudiantesFinales()"></p-button>
        <!-- <p-button label="Generar Reporte" icon="pi pi-calendar-minus" styleClass="p-button-success  mb-2 m-5" style="text-align: center;" (click)="generarReporteAsitenciaEvaluacion()" ></p-button> -->
        <p-button label="Generar Reporte" icon="pi pi-calendar-minus" styleClass="p-button-success  mb-2 m-2"
            style="text-align: center;" (click)="showModalFinalInformationCorse()"></p-button>
    </div>

</div>




















<!-- MODAL -->

<p-dialog header="Contenidos del Curso" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw', height: '450' }"
    [draggable]="false" [resizable]="false">
    <div class="grid p-fluid m-5">
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="nombre" name="nombre" [(ngModel)]="notas.parcial">
                    <label htmlFor="username">Nota Parcial</label>
                </span>
            </div>
        </div>
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="nombre" name="nombre" [(ngModel)]="notas.examenFinal">
                    <label htmlFor="username">Nota Exámen Final</label>
                </span>
            </div>
        </div>
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="nombre" name="nombre" [(ngModel)]="notas.observacion">
                    <label htmlFor="username">observación</label>
                </span>
            </div>
        </div>
        <div class="col-md-12" style="text-align: center; margin: 5px;">
            <p-button label="Guardar Nota" icon="pi pi-check-square" styleClass="p-button-success  mb-2"
                (click)="guardarNotaPorEstudiante()"></p-button>
        </div>
    </div>
</p-dialog>




<!-- FORMULARIO FIN DE CURSO PARA GENERAR EL PDF-->
<p-dialog header="Informe final del curso" [(visible)]="visibleModalFormFinalCourse" [modal]="true"
    [style]="{ width: '50vw', height: '450' }" [draggable]="false" [resizable]="false">
    <div class="grid p-fluid m-5">
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="observacionesInformeFinalCurso"
                        name="observacionesInformeFinalCurso"
                        [(ngModel)]="classInformeFinalC.observacionesInformeFinalCurso">
                    <label htmlFor="username">Observaciones del curso</label>
                </span>
            </div>
        </div>
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="lugarInformeFinalCurso" name="lugarInformeFinalCurso"
                        [(ngModel)]="classInformeFinalC.lugarInformeFinalCurso">
                    <label htmlFor="username">Logar informe final curso</label>
                </span>
            </div>
        </div>
        <div class="col-12 md:col-12 mt-3">
            <div class="p-inputgroup">
                <span class="p-float-label">
                    <input type="text" pInputText id="nombreCantonInformeFinalCurso"
                        name="nombreCantonInformeFinalCurso"
                        [(ngModel)]="classInformeFinalC.nombreCantonInformeFinalCurso">
                    <label htmlFor="username">Canton informe final curso</label>
                </span>
            </div>
        </div>


        <div class="p-grid p-justify-end">
            <p-button [label]="this.classInformeFinalC.idInformeFinalCurso? 'Update':'Save'" icon="pi pi-pencil"
                styleClass="p-button-secondary mb-2" (onClick)="saveUpdateInformFinalCourse()"></p-button>

            <p-button label="Imprimir" icon="pi pi-file-pdf" styleClass="p-button-danger mb-2"
                [disabled]="this.classInformeFinalC.idInformeFinalCurso == null"
                (onClick)="generarReporteAsitenciaEvaluacion()"></p-button>

        </div>

        <!-- <div class="col-md-12" style="text-align: center; margin: 5px;">
            <p-button label="Save" icon="pi pi-check-save" styleClass="p-button-success  mb-2"
                (click)="saveInformFinalCourse()"></p-button>
        </div> -->
    </div>
</p-dialog>